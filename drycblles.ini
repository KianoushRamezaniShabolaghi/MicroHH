[master]
npx=1
npy=1

[grid]
itot=64
jtot=64
ktot=64

xsize=3200.
ysize=3200.
zsize=3200.

swspatialorder=2

[advec]
swadvec=2
cflmax=1.2

[diff]
swdiff=smag2
dnmax=0.3

[thermo]
swthermo=dry
swbasestate=boussinesq
thref0=300.
pbot=100000.

[force]
swlspres=0
swls=0
swwls=0

[boundary]
mbcbot=noslip
mbctop=freeslip
sbcbot=flux
sbctop=neumann
sbot=0.1
stop=0.003
swboundary=surface
z0m=0.1
z0h=0.1
#swtimedep_sbot_2d=true
#sbot_2d_list=th
#sbot_2d_loadtime=3600
#sbot_2d_file='sbot_th'

[fields]
visc=1.e-5
svisc=1.e-5

slist=s001                
# our passive plume tracer
rndseed=2
rndamp[th]=0.1
rndz=300.
rndexp=2.

# ================== PLUME SOURCE ==================
[source]
swsource=true
sourcelist=s001
# One point source for scalar s001 (index 0 because slist has only one scalar)
source_x0=1600.         
# centre of the 3200 m domain
source_y0=1600.
source_z0=50          
# 10 m above surface (stack height, change as you like)
strength=1.0    
# emission rate in or arbitrary units
sigma_x=10.     
# Gaussian half-width in x (m) â€“ smooths the source
sigma_y=10.
sigma_z=12
swvmr=true

# Optional: make the source active only after spin-up
# source_tstart[0]=1800.
# source_tend[0]=10800.

[buffer]
swbuffer=1
zstart=2400.
sigma=0.00223
beta=2.

[time]
endtime=36000
dt=6.
dtmax=60.
savetime=1800
outputiter=50
adaptivestep=true
starttime=0
rkorder=3

[stats]
swstats=1
sampletime=300

[cross]
swcross=1
sampletime=300
crosslist=th,w,s001
xz=1600.
xy=100.


[dump]
swdump          = 1         
 # enable direct NetCDF dumps
dumplist        = u,v,w,th,s001  
 # list ALL fields you want in the .nc files
# (add more if you ever add other scalars)
  # exact times you want
# alternatively you can use an interval (uncomment the line below instead of the line above)
dumpinterval    = 1800      
# every 1800 s, starting from t=0
sampletime=1800

# Optional: also dump at the very end even if it doesn't fall exactly on the interval
swdumpfinal     = 1

# Optional but recommended: compress the NetCDF files a bit (smaller files, negligible speed penalty)
compression     = 1